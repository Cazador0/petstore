{% extends "base.html" %}

{% block content %}
<div class="mb-5">
    <h1 class="title is-2 mb-4">Pet Inventory</h1>
    <div class="level">
        <div class="level-left">
            <div class="level-item">
                <div class="control has-icons-left">
                    <input class="input is-rounded" type="text" placeholder="Search pets...">
                    <span class="icon is-left">
                        <i class="material-icons">search</i>
                    </span>
                </div>
            </div>
        </div>
        <div class="level-right">
            <button class="button is-primary" onclick="document.getElementById('create-modal').classList.add('is-active')">
                <i class="material-icons mr-2">add</i>
                Add Pet
            </button>
        </div>
    </div>
</div>

<div class="columns is-multiline">
    {% for pet in pets %}
    <div class="column is-one-third">
        <div class="card">
            <div class="card-content">
                <div class="media">
                    <div class="media-left">
                        <figure class="image is-48x48">
                            <i class="material-icons" style="font-size:48px; color: #4caf50;">
                                {{ 'pets' if pet.type == 'dog' else 'cats' if pet.type == 'cat' else 'bird' if pet.type == 'bird' else 'emoji_nature' }}
                            </i>
                        </figure>
                    </div>
                    <div class="media-content">
                        <p class="title is-5">{{ pet.name }}</p>
                        <p class="subtitle is-6">
                            {{ pet.breed }} ({{ pet.type|title }})
                        </p>
                    </div>
                </div>

                <div class="content">
                    <div class="tags mb-3">
                        <span class="tag is-info">
                            <i class="material-icons mr-1">pets</i> 
                            {{ pet.gender | default('Unknown') }}
                        </span>
                        <span class="tag is-warning">
                            <i class="material-icons mr-1">today</i> 
                            {{ pet.age_months | default('?') }} months
                        </span>
                        <span class="tag is-primary">
                            <i class="material-icons mr-1">attach_money</i>
                            ${{ pet.price }}
                        </span>
                    </div>
                    
                    <p>
                        Status: 
                        <span class="tag 
                            {{ 'is-success' if pet.status == 'available' }}
                            {{ 'is-warning' if pet.status == 'reserved' }}
                            {{ 'is-danger' if pet.status == 'sold' }}">
                            {{ pet.status | title }}
                        </span>
                    </p>
                </div>
            </div>
            <footer class="card-footer">
                <a href="#" class="card-footer-item">
                    <i class="material-icons mr-1">visibility</i> View
                </a>
                <a href="#" class="card-footer-item">
                    <i class="material-icons mr-1">edit</i> Edit
                </a>
                <a href="#" class="card-footer-item has-text-danger">
                    <i class="material-icons mr-1">delete</i> Delete
                </a>
            </footer>
        </div>
    </div>
    {% else %}
    <div class="column">
        <div class="notification is-warning">
            <i class="material-icons mr-2">info</i> 
            No pets in inventory. Add your first pet!
        </div>
    </div>
    {% endfor %}
</div>

<!-- Create Pet Modal -->
<div class="modal" id="create-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
        <header class="modal-card-head">
            <p class="modal-card-title">Add New Pet</p>
            <button class="delete" onclick="document.getElementById('create-modal').classList.remove('is-active')"></button>
        </header>
        <form action="/pets/create" method="POST">
            <section class="modal-card-body">
                <div class="field">
                    <label class="label">Pet Name</label>
                    <div class="control">
                        <input class="input" type="text" name="name" required>
                    </div>
                </div>
                
                <div class="field">
                    <label class="label">Type</label>
                    <div class="control">
                        <div class="select is-fullwidth">
                            <select name="animal_type" required>
                                <option value="">Select animal type</option>
                                <option value="dog">Dog</option>
                                <option value="cat">Cat</option>
                                <option value="bird">Bird</option>
                                <option value="fish">Fish</option>
                                <option value="reptile">Reptile</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="field">
                    <label class="label">Breed</label>
                    <div class="control">
                        <input class="input" type="text" name="breed">
                    </div>
                </div>
                
                <div class="columns">
                    <div class="column">
                        <div class="field">
                            <label class="label">Age (months)</label>
                            <div class="control">
                                <input class="input" type="number" min="0" name="age" value="0">
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field">
                            <label class="label">Gender</label>
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select name="gender">
                                        <option value="unknown">Unknown</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="columns">
                    <div class="column">
                        <div class="field">
                            <label class="label">Price</label>
                            <div class="control">
                                <input class="input" type="number" min="0" step="0.01" name="price" required>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field">
                            <label class="label">Status</label>
                            <div class="control">
                                <div class="select is-fullwidth">
                                    <select name="status">
                                        <option value="available">Available</option>
                                        <option value="reserved">Reserved</option>
                                        <option value="sold">Sold</option>
                                        <option value="in_care">In Care</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <footer class="modal-card-foot">
                <button class="button is-primary" type="submit">Add Pet</button>
                <button class="button" type="button" onclick="document.getElementById('create-modal').classList.remove('is-active')">Cancel</button>
            </footer>
        </form>
    </div>
</div>
{% endblock %}